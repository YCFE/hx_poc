{"version":3,"sources":["../../../src/type/property/props.js"],"names":["modifier","processor","decorator","propertyKey","prototypeKey","propsProcessUseCustom","options","beforeCreate","unshift","propsInit","Object","defineProperty","enumerable","configurable","get","$$PropsCache","keys","props","set","v","dataInit","$props","proto","key","descriptor","initializer"],"mappings":";;;;QAMgBA,Q,GAAAA,Q;QA8CAC,S,GAAAA,S;QASAC,S,GAAAA,S;;AA7DhB;;AAEO,IAAMC,oCAAc,OAApB;AACA,IAAMC,sCAAe,SAArB;;AAEP,IAAIC,wBAAwB,IAA5B;AACO,SAASL,QAAT,CAAkBM,OAAlB,EAA2B;;AAEhCA,UAAQC,YAAR,GAAuBD,QAAQC,YAAR,IAAwB,EAA/C;AACA,MAAK,OAAOD,QAAQC,YAAf,KAAgC,UAArC,EAAkD;AAChDD,YAAQC,YAAR,GAAuB,CAACD,QAAQC,YAAT,CAAvB;AACD;;AAED,MAAKF,0BAA0B,IAA/B,EAAsC;AACpCA,4BAAwB,0BAAc,CAAd,KAAoB,CAA5C;AACD;;AAED,MAAKA,qBAAL,EAA6B;AAC3BC,YAAQC,YAAR,CAAqBC,OAArB,CAA6B,SAASC,SAAT,GAAqB;AAChDC,aAAOC,cAAP,CAAsB,IAAtB,EAA4B,OAA5B,EAAqC;AACnCC,oBAAY,IADuB;AAEnCC,sBAAc,KAFqB;AAGnCC,WAHmC,iBAG7B;AACJ,cAAK,CAAC,KAAKC,YAAX,EAA0B;AAExB,iBAAKA,YAAL,GAAoB,8BAAmBL,OAAOM,IAAP,CAAYV,QAAQW,KAApB,CAAnB,EAA+C,IAA/C,CAApB;AACD;AACD,iBAAO,KAAKF,YAAZ;AACD,SATkC;AAUnCG,WAVmC,eAU/BC,CAV+B,EAU5B,CAEN;AAZkC,OAArC;AAcD,KAfD;AAgBD,GAjBD,MAiBO;AACLb,YAAQC,YAAR,CAAqBC,OAArB,CAA6B,SAASY,QAAT,GAAoB;AAC/CV,aAAOC,cAAP,CAAsB,IAAtB,EAA4B,OAA5B,EAAqC;AACnCC,oBAAY,IADuB;AAEnCC,sBAAc,KAFqB;AAGnCC,WAHmC,iBAG7B;AAEJ,iBAAO,KAAKO,MAAZ;AACD,SANkC;AAOnCH,WAPmC,eAO/BC,CAP+B,EAO5B,CAEN;AATkC,OAArC;AAWD,KAZD;AAaD;AAEF;;AAEM,SAASlB,SAAT,CAAmBqB,KAAnB,EAA0BC,GAA1B,EAA+BjB,OAA/B,EAAwC;AAC7C;;AAEAA,UAAQW,KAAR,GAAgBK,MAAM,SAAN,CAAhB;AAID;;AAEM,SAASpB,SAAT,CAAmBoB,KAAnB,EAA0BC,GAA1B,EAA+BC,UAA/B,EAA2C;;AAEhDF,QAAM,SAAN,IAAmBE,WAAWC,WAAX,EAAnB;AACA,SAAOH,MAAMC,GAAN,CAAP;AACD","file":"props.js","sourcesContent":["import { getVueVersion, reactiveValueWrap } from '../utils/index.js';\n\nexport const propertyKey = 'props';\nexport const prototypeKey = '$$Props';\n\nlet propsProcessUseCustom = null;\nexport function modifier(options) {\n\n  options.beforeCreate = options.beforeCreate || [];\n  if ( typeof options.beforeCreate === 'function' ) {\n    options.beforeCreate = [options.beforeCreate];\n  }\n\n  if ( propsProcessUseCustom === null ) {\n    propsProcessUseCustom = getVueVersion(1) <= 1;\n  }\n\n  if ( propsProcessUseCustom ) {\n    options.beforeCreate.unshift(function propsInit() {\n      Object.defineProperty(this, 'props', {\n        enumerable: true,\n        configurable: false,\n        get() {\n          if ( !this.$$PropsCache ) {\n            // 把this上的key进行getter/setter包装\n            this.$$PropsCache = reactiveValueWrap( Object.keys(options.props), this);\n          }\n          return this.$$PropsCache;\n        },\n        set(v) {\n          // do nothing\n        }\n      })\n    });\n  } else {\n    options.beforeCreate.unshift(function dataInit() {\n      Object.defineProperty(this, 'props', {\n        enumerable: true,\n        configurable: false,\n        get() {\n          // beforeCreate阶段 Vue的data还未生成\n          return this.$props;\n        },\n        set(v) {\n          // do nothing\n        }\n      })\n    });\n  }\n\n};\n\nexport function processor(proto, key, options) {\n  \"use strict\";\n\n  options.props = proto['$$Props'];\n\n  \n\n}\n\nexport function decorator(proto, key, descriptor) {\n\n  proto['$$Props'] = descriptor.initializer();\n  delete proto[key];\n}"]}