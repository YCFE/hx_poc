{"version":3,"sources":["../../src/runtime/browser.js"],"names":["loadPlugin","lunaMockSimpleConfig","require","__KYLIN_PLUGIN_LUNA_MOCK_CONFIG__","__esModule","default","ex","window","lunaMockConfig","isModuleEmpty","SimpleConfigParser","context","rpc","__KYLIN_PLUGIN_LUNA_MOCK_CONTEXT_RPC__","jsapi","__KYLIN_PLUGIN_LUNA_MOCK_CONTEXT_JSAPI__","contextCache","rpcContext","jsapiContext","console","error","lunaMockCore","kylinFramework","obj","ownKeyList","Object","getOwnPropertyNames","keyList","keys","length"],"mappings":";;;;;kBA6CwBA,U;;AA5CxB,IAAIC,6BAAJ;AACA,IAAI;AACFA,yBAAuBC,QAAQC,iCAAR,CAAvB;AACA,MAAKF,wBAAwBA,qBAAqBG,UAAlD,EAA+D;AAC7DH,2BAAuBA,qBAAqBI,OAA5C;AACD;AACF,CALD,CAKE,OAAMC,EAAN,EAAU,CAEX;;AAID,IAAKL,yBAED,CAACM,OAAOC,cAAR,IAA0BC,cAAcF,OAAOC,cAArB,CAFzB,CAAL,EAIE;AACA,MAAI;AACF,QAAME,qBAAqBR,QAAQ,kCAAR,CAA3B;;AAEA,QAAMS,UAAU;AACdC,WAAKV,QAAQW,sCAAR,CADS;AAEdC,aAAOZ,QAAQa,wCAAR;AAFO,KAAhB;;AAKA,QAAMC,eAAe;AACnB,UAAIC,UAAJ,GAAiB;AACf,eAAON,QAAQC,GAAR,CAAYD,OAAnB;AACD,OAHkB;AAInB,UAAIO,YAAJ,GAAmB;AACjB,eAAOP,QAAQG,KAAR,CAAcH,OAArB;AACD;AANkB,KAArB;;AASAD,uBAAmBT,oBAAnB,EAAyCe,YAAzC;AAED,GAnBD,CAmBE,OAAMV,EAAN,EAAU;AACVa,YAAQC,KAAR,8DAAuDd,EAAvD;AACD;AACF;;AAED,IAAMe,eAAenB,QAAQ,iCAAR,CAArB;;AAGe,SAASF,UAAT,CAAoBsB,cAApB,EAAoC,CAGlD;;AAED,SAASb,aAAT,CAAuBc,GAAvB,EAA4B;AAC1B,MAAK,CAACtB,oBAAN,EAA6B;AAC3B,WAAO,IAAP;AACD;;AAED,MAAMuB,aAAaC,OAAOC,mBAAP,CAA2BH,GAA3B,CAAnB;AACA,MAAMI,UAAUF,OAAOG,IAAP,CAAYL,GAAZ,CAAhB;;AAEA,SAAOC,WAAWK,MAAX,KAAsB,CAAtB,IAA2BF,QAAQE,MAAR,KAAmB,CAArD;AACD","file":"browser.js","sourcesContent":["// 需要在这里加载 mock.config.js\nlet lunaMockSimpleConfig;\ntry {\n  lunaMockSimpleConfig = require(__KYLIN_PLUGIN_LUNA_MOCK_CONFIG__);\n  if ( lunaMockSimpleConfig && lunaMockSimpleConfig.__esModule ) {\n    lunaMockSimpleConfig = lunaMockSimpleConfig.default;\n  }\n} catch(ex) {\n\n}\n\n// 如果有返回值，且 （window上无lunaMockConfig 或 有空lunaMockConfig)\n// 进行simpleConfig处理，并提供 requireContext\nif ( lunaMockSimpleConfig && \n  (\n    !window.lunaMockConfig || isModuleEmpty(window.lunaMockConfig)\n  )\n) {\n  try {\n    const SimpleConfigParser = require('@alipay/luna-mock-webpack-config');\n\n    const context = {\n      rpc: require(__KYLIN_PLUGIN_LUNA_MOCK_CONTEXT_RPC__),\n      jsapi: require(__KYLIN_PLUGIN_LUNA_MOCK_CONTEXT_JSAPI__)\n    };\n\n    const contextCache = {\n      get rpcContext() {\n        return context.rpc.context;\n      },\n      get jsapiContext() {\n        return context.jsapi.context;\n      }\n    };\n\n    SimpleConfigParser(lunaMockSimpleConfig, contextCache);\n   \n  } catch(ex) {\n    console.error(`@alipay/luna-mock-webpack-config 解析错误`, ex);\n  }\n}\n\nconst lunaMockCore = require('@alipay/luna-mock/dist/index.js');\n\n\nexport default function loadPlugin(kylinFramework) {\n\n  // nothing 不需要做\n}\n\nfunction isModuleEmpty(obj) {\n  if ( !lunaMockSimpleConfig ) {\n    return true;\n  }\n\n  const ownKeyList = Object.getOwnPropertyNames(obj);\n  const keyList = Object.keys(obj);\n\n  return ownKeyList.length === 0 && keyList.length === 0;\n}"]}