{"version":3,"sources":["../../src/runtime/resource.js"],"names":["generateResourceImpl","resourceMap","shouldClearOther","resourceModifyImpl","globalResource","kylinApp","program","js","css","externals","forEach","obj","dropKeys","Object","keys","k","npmName","configObj","external","undefined","hasOwnProperty"],"mappings":";;;;;kBAAwBA,oB;AAAT,SAASA,oBAAT,OAGV;AAAA,MAFDC,WAEC,QAFDA,WAEC;AAAA,MADDC,gBACC,QADDA,gBACC;;;AAEH,SAAO,SAASC,kBAAT,CAA4BC,cAA5B,EAA4CC,QAA5C,EAAsDC,OAAtD,EAA+D;;AAEpE,QAAKJ,gBAAL,EAAwB;AAEtB,OAACE,eAAeG,EAAhB,EAAoBH,eAAeI,GAAnC,EAAwCJ,eAAeK,SAAvD,EAAkEC,OAAlE,CAA0E,UAACC,GAAD,EAAS;AACjFC,iBAASD,GAAT;AACD,OAFD;AAGD;;AAGDE,WAAOC,IAAP,CAAYb,WAAZ,EAAyBS,OAAzB,CAAiC,UAACK,CAAD,EAAO;AACtC,UAAMC,UAAUD,CAAhB;AACA,UAAME,YAAYhB,YAAYc,CAAZ,CAAlB;AACA,UAAMG,WAAWD,UAAUC,QAA3B;AACA,UAAMX,KAAKU,UAAUV,EAArB;AACA,UAAMC,MAAMS,UAAUT,GAAtB;;AAEAJ,qBAAeK,SAAf,CAAyBO,OAAzB,IAAoCE,QAApC;AACA,UAAKV,QAAQW,SAAb,EAAyB;AACvBf,uBAAeI,GAAf,CAAmBU,QAAnB,IAA+BV,GAA/B;AACD;AACD,UAAKD,OAAOY,SAAZ,EAAwB;AACtBf,uBAAeG,EAAf,CAAkBW,QAAlB,IAA8BX,EAA9B;AACD;AACF,KAdD;AAgBD,GA1BD;AA2BD;;AAED,SAASK,QAAT,CAAkBD,GAAlB,EAAuB;AACrB,OAAI,IAAII,CAAR,IAAaJ,GAAb,EAAkB;AAChB,QAAKA,IAAIS,cAAJ,CAAmBL,CAAnB,CAAL,EAA6B;AAC3B,aAAOJ,IAAII,CAAJ,CAAP;AACD;AACF;AACF","file":"resource.js","sourcesContent":["export default function generateResourceImpl({\n    resourceMap,\n    shouldClearOther\n  }) {\n  \n  return function resourceModifyImpl(globalResource, kylinApp, program) {\n\n    if ( shouldClearOther ) {\n      // 分别清理 globalResource.js, .css, .externals 的所有Key\n      [globalResource.js, globalResource.css, globalResource.externals].forEach((obj) => {\n        dropKeys(obj);\n      })\n    }\n\n    // 然后再根据输入解析\n    Object.keys(resourceMap).forEach((k) => {\n      const npmName = k;\n      const configObj = resourceMap[k];\n      const external = configObj.external;\n      const js = configObj.js;\n      const css = configObj.css;\n\n      globalResource.externals[npmName] = external;\n      if ( css !== undefined ) {\n        globalResource.css[external] = css;\n      }\n      if ( js !== undefined ) {\n        globalResource.js[external] = js;\n      }\n    });\n    \n  }\n}\n\nfunction dropKeys(obj) {\n  for(let k in obj) {\n    if ( obj.hasOwnProperty(k) ) {\n      delete obj[k];\n    }\n  }\n}"]}